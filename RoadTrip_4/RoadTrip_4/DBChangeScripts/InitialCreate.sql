CREATE TABLE [dbo].[Expenses] (
    [Id] [int] NOT NULL IDENTITY,
    [OwnerId] [int] NOT NULL,
    [RoadTripId] [uniqueidentifier] NOT NULL,
    [BorrowerId] [int],
    [ExpenseDate] [datetime] NOT NULL,
    [Amount] [float] NOT NULL,
    [Longitude] [float],
    [Latitude] [float],
    [City] [nvarchar](max),
    [State] [nvarchar](max),
    CONSTRAINT [PK_dbo.Expenses] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_BorrowerId] ON [dbo].[Expenses]([BorrowerId])
CREATE INDEX [IX_OwnerId] ON [dbo].[Expenses]([OwnerId])
CREATE INDEX [IX_RoadTripId] ON [dbo].[Expenses]([RoadTripId])
CREATE TABLE [dbo].[UserDetails] (
    [Id] [int] NOT NULL IDENTITY,
    [FirstName] [nvarchar](max),
    [LastName] [nvarchar](max),
    [NickName] [nvarchar](max),
    [Email] [nvarchar](max),
    [UserProfileId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.UserDetails] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserProfileId] ON [dbo].[UserDetails]([UserProfileId])
CREATE TABLE [dbo].[RoadTrips] (
    [Id] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](max),
    [Details] [nvarchar](max),
    [StartDate] [datetime] NOT NULL,
    [EndDate] [datetime],
    [OwnerId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.RoadTrips] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_OwnerId] ON [dbo].[RoadTrips]([OwnerId])
CREATE TABLE [dbo].[PersonToRoadTripMaps] (
    [Id] [int] NOT NULL IDENTITY,
    [RoadTripId] [uniqueidentifier] NOT NULL,
    [UserDetailId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.PersonToRoadTripMaps] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_RoadTripId] ON [dbo].[PersonToRoadTripMaps]([RoadTripId])
CREATE INDEX [IX_UserDetailId] ON [dbo].[PersonToRoadTripMaps]([UserDetailId])
CREATE TABLE [dbo].[UserProfile] (
    [UserId] [int] NOT NULL IDENTITY,
    [UserName] [nvarchar](max),
    CONSTRAINT [PK_dbo.UserProfile] PRIMARY KEY ([UserId])
)
CREATE TABLE [dbo].[Invitations] (
    [Id] [int] NOT NULL IDENTITY,
    [InvitingUserDetailId] [int] NOT NULL,
    [GuestEmail] [nvarchar](max),
    [InvitationStatus] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Invitations] PRIMARY KEY ([Id])
)
ALTER TABLE [dbo].[Expenses] ADD CONSTRAINT [FK_dbo.Expenses_dbo.UserDetails_BorrowerId] FOREIGN KEY ([BorrowerId]) REFERENCES [dbo].[UserDetails] ([Id])
ALTER TABLE [dbo].[Expenses] ADD CONSTRAINT [FK_dbo.Expenses_dbo.UserDetails_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [dbo].[UserDetails] ([Id])
ALTER TABLE [dbo].[Expenses] ADD CONSTRAINT [FK_dbo.Expenses_dbo.RoadTrips_RoadTripId] FOREIGN KEY ([RoadTripId]) REFERENCES [dbo].[RoadTrips] ([Id])
ALTER TABLE [dbo].[UserDetails] ADD CONSTRAINT [FK_dbo.UserDetails_dbo.UserProfile_UserProfileId] FOREIGN KEY ([UserProfileId]) REFERENCES [dbo].[UserProfile] ([UserId])
ALTER TABLE [dbo].[RoadTrips] ADD CONSTRAINT [FK_dbo.RoadTrips_dbo.UserDetails_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [dbo].[UserDetails] ([Id])
ALTER TABLE [dbo].[PersonToRoadTripMaps] ADD CONSTRAINT [FK_dbo.PersonToRoadTripMaps_dbo.RoadTrips_RoadTripId] FOREIGN KEY ([RoadTripId]) REFERENCES [dbo].[RoadTrips] ([Id])
ALTER TABLE [dbo].[PersonToRoadTripMaps] ADD CONSTRAINT [FK_dbo.PersonToRoadTripMaps_dbo.UserDetails_UserDetailId] FOREIGN KEY ([UserDetailId]) REFERENCES [dbo].[UserDetails] ([Id])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201312261943112_InitialMigration', N'RoadTrip_4.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB6EE3B6167D3F40FF41D0537B80C6C9B40F3D03BBC58C2719049D248338EDEB80B16887A82EAE44A5C9B7F5E17CD2F98543CA1245F1265237DB83BE3914B9B8B9B9F7D6E66529FFFBFBBFF35F5EA2D07B8669869278E15F9C9DFB1E8CD74980E2EDC2CFF1E6FB9FFC5F7EFEE65FF3CB207AF17EAFEAFD40EB919671B6F09F30DEBD9DCDB2F5138C407616A1759A64C9069FAD9368068264F6E6FCFC3FB38B8B1924103EC1F2BCF97D1E6314C1E20FF2E73289D770877310DE24010CB3B29C3C5915A8DE2D8860B6036BB8F0EF13103CA468F7E5C7B30F0003DF7B172240C458C170E37B208E130C3011F2ED6F195CE13489B7AB1D2900E1C3EB0E927A1B1066B014FE6D5DDD761CE76FE8386675C34E7AF0D908C9182F892EF02B15AF18E7C2BF7CD9C19808C95522D57E85AF8D0252F4394D7630C5AFF7705336BD0E7C6FD66C37131BB2665C1BDA3BF915E31FDEF8DE6D1E86E031844C599C56573849E14718C31460187C0618C334A618B01885D4BBD0D7DD5FA4657B876690CA046A9C8F390A9C61DE27699AFCA510C7DCAC9C1D627CB06A477F3F107B7616E15D94104F6030494E9A3A837C22368E701E4011A7A5199950F756CB6292F72D887B9130E17B37E0E5138CB7F869E1939FBE77855E6050959443F82D4624AA904638CD5B3B59614EB9C3F5720B9ED1B630638D25F8DE3D0C8B0AD913DAED63CA5939DF5FEA4A576912DD27616D0BECD9975592A76B2A7AA2A9F000D22DC4F6A2150E6394ABAC210B553CD04AB47FEA2A4EE57A4689EA4AB2502C7CEBE4621554A2CD6775B034865012FCD30F1003147E8D51F40AA519A63F47F7C44F60A28E6ED1FA8F493ABA8CA8518CDD0BB53F52B44121747EDBB53A5FB64C21B59BF7AFB41BA52B322F92A243F309F3B2CA0D85C795973A8B7895A45AE13E93343289698FFBCA3760F78573584E58734D49F896EAAE83E12651390E0EBA51B5965F5D438A7D9A6ABD22200BC293C7BF4EC9D824BEBFD7713645FE92E24112C4CB3850E38C91666B1DA17C3753A71E2E01109D579B21F44F95ACA3A1E8989A60E91240AE63A3CA54214BA53E533DAB386854AB755451207F8D09D6402BCC3AAE0F9F048C674DA21358999E8B4B54EFF93153039B41283289CE8B8DEAE5DFC1198A28D1C121AA76533905ED6F84D7B4B59AAFE36754EEB97D8521A7181DD1678F9821207ECC6186A759EED45343B76EF23AC3A23E2D3F340E446F0F79A4B4860AF53ABB0AC136E34610C0347C2523E6B5D81CC70D8C1E61CA4342A2F5DF419893BFCFA56137AADFC32DCAC824D70D2EE491EC65E60BDF6559B24685E442482FD39366972403F4CCB94AADE93AD4DFE42146BB10AD892217FEBFA5816851592A51A3F2F1B7897B21E1127F83293578102E4960C7294031969D13C56BB403A15104A195A55353AD337CF1C90748524CEA8F468DDA74CC126CB977D689106CDA54339F7196613618E36B5E37D176EFFC7ADA55A99E835DD925ACEDB63B908DD9883381C5D94C828D187C827A3426A8DD74355B852A6B1BD50C553B4813863B3B910E648CF264D808D24C5A0E62909ACD389D5DB4EDCCD9D883C9EE5AB6F4047CB675388AC19965B19DDF9EC66656B8AD10DC9EFA41AC4C3A0CD4CDBFFE64B09EF9EA9CDFC1ACB4E78956067B7E76369049E9E498206AE9346BD3357FE47F50FB3167FA9A13DC412CE77069BE5282090DE6C4927C6933BD6D664DC97C0F833960D2AE136142A33981E47CBF5D42DA10DF8DEBDD8952085A0E5FB0643DB4CD0A62E184C7F7EACD17D174244B6942D4F14385C2479716207686AC80A90DAE054491DBAAF094AB0B8B819679886EA42C9F6B81AA37B15448DC86A708C49982ACB8EA988BABA43E08136DB375AF89C9DF9825C9C65B7797389C86D9881BB4CD615AA8C07C00222BC47E27C57D2F851BA4DA1A0D7AB3DA3DB1998D8174C8BBAF9D16759B015DB60386D6A4620360348BD45D1291B568B3827559C3DA0DC965D52A20D641B0B796E44B96B27ECC6B2FBBD5173782FA9567508876BD359ABD08D73AF56A680BE1EA454457054C14BFE51B247A0558C4696D6ADC550D43C7E0EAB08B656FECD97CB6E73E9405F39986243127016D87E22D479A284BBCD59E31B1FC7EE54E5288F618B375A6E02A3069594F3849C1160A4F49D744D2E2B22AA56A3C029A452E8348AA6699AB56BD0929AB3C6B551E5535A0BF851469CF1E61C9AD9CD6976DAFC8B822BA2C288E7765B3915B7A94B50242902A0E9397499847B17E81A26FCDD6A23C847681AAC7E1D7263C9469CDA247E3F7537834D33E8B1EADC1ACE0E11A0FECF12A76050F5595D9A370F40A1E882B76C0629C8B06142BB547DAF3307894A5E2928109A12459F01065918C319F09EE20AD6A25A71322A0E8C4562ECEBF5BFA78B93E17B5707453E3717C9DBBDECF8370C52E16A782AA4BED91EA1BFA3C525DEAE0E7FB3B290D0F8F143B03260CE13080C76A3927389835D7F9411F5BD6653D1696AC6F3A8E1D2BACC5D1525862C9836817327A1CEE42B610EFAA6207EBADAE6437ECB72A1CEF8D7E20AB552EB8FB1870EB15E202B1CD96AD50C631EB6153A8E6D1B918C7F487EA077D29B3957FDFB7B26693C3F2B5AC6D6D52B64ACDEE5326C7B6BAF468A68ADF5EEE3353BA9BB75613656A3C8E83AAAFD236F09435EC7BE0AFD6F2B87CB9A3BC8DABAC92AC8DA713DB97B447215661BDB3BD0A614F625EEE0FB47FDD41DA30D857F13DA2B26714D0CD82D56B8661B437CCD59FE13244902EE8AA0A3720461B320B0FC91F305EF86FCECF7F12BE11D1E17B0DB32C0B42C546C8317CB401D1D1B75E3E77BC3B2E10C88A3E7A7FA5218FD19F3944854C1B4477377B7FB14110CC8A002C7FBF2120BF71FFEF376CC204B8EB49FA7C83046347D4C6FD41F88F3BC4CF205D3F81F4DB08BC7CE70AD4F8808303D249F0FB47713889D2DF4BFF226DBF179848CDEF05D6E0A3F4425252ECDB03D50910A87BC7C9C1664B204CF78D094D5274E7A82B90A25538360239BFE34E8B253B4A981AE1A5AE22BC0D38174741CE1C652E443EE618EFD943722E47519A8966D925CB954996BD82A48E48D9DD213AD30DF92B3F1DAF09CBF7C03AD2157BD21EA6E4129EC0CDE24EF441A719349982F2CA655FC2572FDEE981B856C778977830A2DFA0D1E3784C66DA98D2D5684E938EC7AE467625C7F5B0BE01CD437FA43132AFEEEB23D1394FA392E026DDE2EBC68C398178A1BFCD76B254B841DF23FFCCFFB1A4A0D6E4B6C1D2CEE9E77ECAF4D265E68F829E26DF0C16274E495033F1D3F647850B3F784CC82CEF17CABACBDD06F65A0B794DD58BE90EBC8EDD6624B7A93AD15F2FB7E0BED952DF541DDB506E4C24B9368E9C4EA3EE24BA160E9DAAA306036F62929D6C73E285531B6A9D9283703A543AA761B4AF0A5BAE889D143BAE9F7D1C463D23D3DD849022DD04B323B759AAF3F03CB67E1620BC331BB4952322AA9DC22007E2A3750F76C30CD3816E265FD9223920F76F7B480A9AA16D0D41FF894F0CD78DEC8FD5B98E374995880A1255558483901B32F301490DDFA5186DC01A93C76B9865C5E72BCBAF2D5E468F30B88EEF72BCCB3119328C1EC306038626B3A6FE0B4E5D53E6F9DDAEC8058618021113D1B3E9BBF87D8EC2FA2B91578AC31B0D04CD92CBC3AFE248881E826D5F19D26D125B0295EA63C9FD038C762101CBEEE21578867AD9DA75D8D4D8FC0302DB1444598951B7277F12F30BA2979FFF0FBA76DE06786A0000 , N'6.0.2-21211')

